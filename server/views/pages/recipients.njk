{% extends "../partials/layout.njk" %}

{% set pageTitle = applicationName + " - Home" %}
{% set mainClasses = "app-container govuk-body" %}

{% block content %}

  {% from "moj/components/side-navigation/macro.njk" import mojSideNavigation %}
  {% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}
  {% from "govuk/components/button/macro.njk" import govukButton %}
  {% import "../partials/recipientAddressBlock.njk" as addressBlock %}

  <form method="post">
    <input type="hidden" name="_csrf" value="{{ csrfToken }}">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-third">
        {% include "pages/side-nav.njk" %}
      </div>
      <div class="govuk-grid-column-two-thirds">
        {% include "partials/review-required.njk" %}
        <h1 class="govuk-heading-l">Suicide Risk - Recipients</h1>

        <div class="govuk-summary-card">
          <div class="govuk-summary-card__content">
            <h2 class="govuk-heading-m">Other Colleagues</h2>

            {% if contactsOtherColleagues and contactsOtherColleagues.length > 0 %}
              {% for rec in contactsOtherColleagues %}
                {{ addressBlock.recipientAddressBlock(rec, suicideRiskId) }}
              {% endfor %}
            {% else %}
              <p>No Recipients of this type added</p>
            {% endif %}

            {{ govukButton({
              text: "Add Recipient of this type",
              type: "submit",
              href: '/recipient-details/' + suicideRiskId + '?contactType=COLLEAGUE',
              attributes: { id: "add-other-colleagues--button" }
            }) }}
          </div>
        </div>

        <div class="govuk-summary-card">
          <div class="govuk-summary-card__content">
            <h2 class="govuk-heading-m">Prison Establishment</h2>

            {% if contactsPrisonEstablishment and contactsPrisonEstablishment.length > 0 %}
              {% for rec in contactsPrisonEstablishment %}
                {{ addressBlock.recipientAddressBlock(rec, suicideRiskId) }}
              {% endfor %}
            {% else %}
              <p>No Recipients of this type added</p>
            {% endif %}

            {{ govukButton({
              text: "Add Recipient of this type",
              type: "submit",
              href: '/recipient-details/' + suicideRiskId + '?contactType=PRISON',
              attributes: { id: "add-prison-establishment--button" }
            }) }}
          </div>
        </div>


        <div class="govuk-summary-card">
          <div class="govuk-summary-card__content">
            <h2 class="govuk-heading-m">Police Custody (Cells)</h2>

            {% if contactsPoliceCustodyCells and contactsPoliceCustodyCells.length > 0 %}
              {% for rec in contactsPoliceCustodyCells %}
                {{ addressBlock.recipientAddressBlock(rec, suicideRiskId) }}
              {% endfor %}
            {% else %}
              <p>No Recipients of this type added</p>
            {% endif %}

            {{ govukButton({
              text: "Add Recipient of this type",
              type: "submit",
              href: '/recipient-details/' + suicideRiskId + '?contactType=POLICE',
              attributes: { id: "add-police-custody--button" }
            }) }}
          </div>
        </div>

        <div class="govuk-summary-card">
          <div class="govuk-summary-card__content">
            <h2 class="govuk-heading-m">Medical Services</h2>

            {% if contactsMedicalServices and contactsMedicalServices.length > 0 %}
              {% for rec in contactsMedicalServices %}
                {{ addressBlock.recipientAddressBlock(rec, suicideRiskId) }}
              {% endfor %}
            {% else %}
              <p>No Recipients of this type added</p>
            {% endif %}

            {{ govukButton({
              text: "Add Recipient of this type",
              type: "submit",
              href: '/recipient-details/' + suicideRiskId + '?contactType=MEDICAL',
              attributes: { id: "add-medical-services--button" }
            }) }}
          </div>
        </div>

        <div class="govuk-summary-card">
          <div class="govuk-summary-card__content">
            <h2 class="govuk-heading-m">Other Agencies</h2>

            {% if contactsOtherAgency and contactsOtherAgency.length > 0 %}
              {% for rec in contactsOtherAgency %}
                {{ addressBlock.recipientAddressBlock(rec, suicideRiskId) }}
              {% endfor %}
            {% else %}
              <p>No Recipients of this type added</p>
            {% endif %}

            {{ govukButton({
              text: "Add Recipient of this type",
              type: "submit",
              href: '/recipient-details/' + suicideRiskId + '?contactType=OTHER',
              attributes: { id: "add-other-agencies--button" }
            }) }}
          </div>
        </div>

        <div>
          {{ govukButton({
            text: "Continue",
            preventDoubleClick: "true",
            type: "submit",
            attributes: {
              id: "continue-button"
            }
          }) }}
          {{ govukButton({
            text: "Save Progress and Close",
            type: "submit",
            name: "action",
            value: "saveProgressAndClose",
            classes: "govuk-button--secondary",
            attributes: {
              id: "close-button"
            }
          }) }}

          {{ govukButton({
            text: "Refresh from Delius",
            preventDoubleClick: "true",
            type: "submit",
            name: "action",
            value: "refreshFromNdelius",
            classes: "govuk-button--secondary",
            attributes: {
              id: "refresh-from-ndelius--button"
            }
          }) }}
        </div>
      </div>
    </div>
  </form>

{% endblock %}

